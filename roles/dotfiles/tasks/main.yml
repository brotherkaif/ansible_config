- name: create required directories
  tags: dotfiles
  file:
    path: '{{ home_directory }}/{{ item }}'
    state: directory
    owner: '{{ owner }}'
    group: '{{ group }}'
    mode: 0755
  loop:
    - .config/git
    - .config/lazygit
    - .config/nvim
    - .config/nvim/lua
    - .config/nvim/lua/plugins
    - .local/share/applications
    - 1-projects
    - 2-areas
    - 3-resources
    - 3-resources/customisation
    - 3-resources/customisation/devdocs
    - 3-resources/customisation/fira-code-font
    - 3-resources/customisation/macos-terminal-themes
    - 4-archive

- name: sync dotfiles
  tags: dotfiles
  copy:
    src: '{{ item.package }}/{{ item.path }}'
    dest: '{{ home_directory }}/{{ item.path }}'
    owner: '{{ owner }}'
    group: '{{ group }}'
  loop:
    - { package: 'bash', path: '.bash_profile' }
    - { package: 'bash', path: '.bashrc' }
    - { package: 'bash', path: '.inputrc' }
    - { package: 'devdocs', path: '3-resources/customisation/devdocs/devdocs.json' }
    - { package: 'gcs', path: '.customize_environment' }
    - { package: 'git', path: '.config/git/git-commit-template.txt' }
    - { package: 'git', path: '.gitconfig' }
    - { package: 'lazygit', path: '.config/lazygit/config.yml' }
    - { package: 'nvim', path: '.config/nvim/init.lua' }
    - { package: 'nvim', path: '.config/nvim/lua/binds.lua' }
    - { package: 'nvim', path: '.config/nvim/lua/lsp.lua' }
    - { package: 'nvim', path: '.config/nvim/lua/options.lua' }
    - { package: 'nvim', path: '.config/nvim/lua/plugins.lua' }
    - { package: 'nvim', path: '.config/nvim/lua/plugins/formatter-config.lua' }
    - { package: 'nvim', path: '.config/nvim/lua/plugins/nvim-cmp-config.lua' }
    - { package: 'nvim', path: '.config/nvim/lua/plugins/telescope-config.lua' }
    - { package: 'nvim', path: '.config/nvim/lua/plugins/treesitter-config.lua' }
    - { package: 'tmux', path: '.tmux.conf' }
    - { package: 'zsh', path: '.zshrc' }

- name: download Terminal.app themes
  tags:
    - dotfiles
    - customisation
  get_url:
    url: 'https://github.com/dracula/terminal-app/archive/master.zip'
    dest: ~/3-resources/customisation/macos-terminal-themes/
    mode: 0755

- name: download Fira Code font
  tags:
    - dotfiles
    - customisation
  get_url:
    url: 'https://github.com/tonsky/FiraCode/releases/download/5.2/Fira_Code_v5.2.zip'
    dest: ~/3-resources/customisation/fira-code-font/
    mode: 0755
